import{H as L,L as O,G as V,r as y,o as c,c as d,b as p,w as f,F as h,d as e,f as k,J as w,a2 as C,e as u,n as b,i as _,t as l,h as F}from"./app.7ba999e8.js";import{A as B}from"./Admin.bd1c676d.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";import"./Category.8cc950fc.js";const N={components:{Head:L,AdminLayout:B,Link:O},props:{errors:Object,gacha:Object,category_share:Object,products:Object,profile:Object,lost_types:Object},data(){return{hasCheck:!1,main_tab:[{title:"\u672A\u9078\u629E",route_url:route("user.products"),is_active:!0},{title:"\u767A\u9001\u5F85\u3061",route_url:route("user.products.wait"),is_active:!1},{title:"\u767A\u9001\u6E08\u307F",route_url:route("user.products.delivered"),is_active:!1}],ready_delivery:0,products_count:0,isCheckAll:!1,_products:this.products.data.filter(r=>r.status==1)}},setup(r){return{form:V({checks:{}})}},methods:{changeCheck(){let r,t=!1;for(this._products=this.products.data.filter(n=>n.status==1),this.isCheckAll=this._products.length>0,r=0;r<this._products.length;r++)this.form.checks["id"+this._products[r].id]?t=!0:this.isCheckAll=!1;this.hasCheck=t},submit(r){let t,n=0;var i=0;let o=!1,a=!1;for(t=0;t<this._products.length;t++)this.form.checks["id"+this._products[t].id]&&(n++,i=parseInt(i)+parseInt(this._products[t].point),this._products[t].lost_type=="1"&&(a=!0),this._products[t].lost_type=="2"&&(o=!0));if(r=="point"){if(a){alert("\u914D\u9001\u9650\u5B9A\u5546\u54C1\u306F\u30DD\u30A4\u30F3\u30C8\u306B\u5909\u63DB\u3067\u304D\u307E\u305B\u3093\u3002");return}i>0&&confirm("\u4EA4\u63DB\u3057\u307E\u3059\u304B\uFF1F \u9078\u629E\u3057\u305F"+n+"\u70B9\u306E\u5546\u54C1\u3092"+i+"pt\u3068\u4EA4\u63DB\u3057\u307E\u3059\u3002")&&this.form.post(route("user.products.point.exchange"),{onFinish:()=>{this.form.checks={},this.hasCheck=!1,this.isCheckAll=!1}})}else{if(o){alert("\u30DD\u30A4\u30F3\u30C8\u5909\u63DB\u9650\u5B9A\u306E\u5546\u54C1\u304C\u9078\u629E\u3055\u308C\u307E\u3057\u305F\u3002");return}n>0&&(this.products_count=n,this.ready_delivery=1)}},back_delivery(){this.ready_delivery=0},submit_delivery(){this.profile.address?confirm(""+this.products_count+"\u70B9\u306E\u5546\u54C1\u3092\u914D\u9001\u3057\u307E\u3059\u304B\uFF1F")&&this.form.post(route("user.delivery.post"),{onFinish:()=>{this.ready_delivery=2,this.form.checks={},this.hasCheck=!1,this.isCheckAll=!1}}):alert("\u5165\u529B\u30A8\u30E9\u30FC\u3001\u914D\u9001\u5148\u60C5\u5831\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002")},checkall(){let r;for(this.hasCheck=!1,r=0;r<this._products.length;r++)this.form.checks["id"+this._products[r].id]=this.isCheckAll,this.hasCheck=this.isCheckAll}}},I={key:0,class:"p-4 md:p-8 w-full"},T={class:"py-3 pt-6 px-6"},U=e("h1",{class:"mb-5 text-lg text-center font-bold underline underline-offset-8"},"\u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7",-1),D={class:"w-full text-neutral-400 mb-3"},P={class:"grid md:grid-cols-2 gap-1"},z={class:"mt-1 py-2 px-3 hover:bg-sky-50 focus:bg-sky-50"},E={class:"flex border-neutral-200 items-start"},G=["id","onUpdate:modelValue"],J=["for"],M=["src"],S={class:"ml-2"},q={class:"text-sm md:py-2 py-1 px-3"},K={class:"text-sm md:py-2 py-1 px-3"},Q={class:"text-sm md:py-2 py-1 px-3"},R={key:0,class:"flex bg-red-500 justify-center items-center rounded-full px-3 mx-3 md:my-1 py-1 text-white w-fit"},W=e("img",{src:"/images/icon_cash.png",class:"h-4 mr-1"},null,-1),X={class:"text-center pt-4 pb-2 sticky bottom-20 bg-white"},Y={class:"cursor-pointer flex justify-center"},Z=e("span",{class:"ml-2 font-bold"},"\u5168\u3066\u3092\u9078\u629E\u3059\u308B",-1),$={class:"pb-3 pt-6 text-center text-sm text-sky-500"},ee={class:"py-4 text-center text-neutral-50 sticky bottom-0 bg-white"},te=["disabled"],se=e("div",{class:"border-solid border border-white rounded-md px-1 py-2"},"\u30DD\u30A4\u30F3\u30C8\u306B\u63DB\u3048\u308B",-1),oe=[se],ie=["disabled"],re=e("div",{class:"border-solid border border-white rounded-md px-1 py-2"},"\u767A\u9001\u3059\u308B",-1),ne=[re],ce={key:1,class:"pt-6 md:px-2 px-4",style:{"min-height":"400px"}},de=e("h2",{class:"mb-2 text-lg font-bold"},"\u914D\u9001\u5185\u5BB9\u306E\u78BA\u8A8D",-1),le=e("hr",{class:"mb-6"},null,-1),ae={class:"mb-3 text-sm"},ue={class:"mb-8"},he={key:0,class:"mb-0 border-neutral-200 border-b"},be={class:"flex border-neutral-200 items-center"},_e=["src"],pe=["for"],fe={class:"text-red-500"},me=e("div",{class:"mb-2 text-sm"},"\u914D\u9001\u5148\u60C5\u5831",-1),ye={class:"mb-8 border border-neutral-200 rounded-md px-4 py-2 flex items-center justify-between"},ke={class:"flex-1"},xe={class:"font-bold text-sm"},ve={class:"text-sm"},ge={class:"text-sm"},we={class:"mb-8 text-center text-neutral-50"},Ce=["disabled"],je=["disabled"],Ae={key:2,class:"pt-6 md:px-2 px-4",style:{"min-height":"400px"}},Le=e("h2",{class:"mb-2 text-lg font-bold"},"\u914D\u9001\u624B\u7D9A\u304D\u5B8C\u4E86",-1),Oe=e("hr",{class:"mb-8"},null,-1),Ve={class:"mb-8"},Fe=e("br",null,null,-1),Be=e("br",null,null,-1),He=e("span",{class:"font-bold"},"\u6570\u65E5~\u6570\u9031\u9593",-1),Ne=e("br",null,null,-1),Ie={class:"mb-6 text-center text-neutral-50"};function Te(r,t,n,i,o,a){const j=y("Head"),m=y("Link"),A=y("AdminLayout");return c(),d(h,null,[p(j,{title:"\u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7"}),p(A,null,{default:f(()=>[o.ready_delivery==0?(c(),d("div",I,[e("div",T,[U,e("div",D,[(c(!0),d(h,null,k(o.main_tab,(s,x)=>(c(),F(m,{href:s.route_url,class:b(["inline-block md:px-8 px-4 py-1.5",{"bg-blue-900 text-white":s.is_active}])},{default:f(()=>[u(l(s.title),1)]),_:2},1032,["href","class"]))),256))])]),e("div",P,[(c(!0),d(h,null,k(n.products.data,(s,x)=>{var v;return c(),d("div",z,[e("div",E,[w(e("input",{id:"checkbox"+s.id,"onUpdate:modelValue":g=>i.form.checks["id"+s.id]=g,type:"checkbox",onChange:t[0]||(t[0]=g=>a.changeCheck()),class:"cursor-pointer rounded border-neutral-300 text-neutral-600 shadow-sm focus:ring-neutral-500 m-1"},null,40,G),[[C,i.form.checks["id"+s.id]]]),e("label",{for:"checkbox"+s.id,class:"cursor-pointer flex items-start justify-center text-sm py-1 px-2"},[e("img",{src:s.image,class:"w-24 h-32 inline-block object-cover"},null,8,M),e("div",S,[e("div",q,l(s.name),1),e("div",K,l(s.rare),1),e("div",Q,l(n.lost_types[(v=s.lost_type)!=null?v:0]),1),s.is_lost_product!=2?(c(),d("div",R,[W,e("span",null,l(s.point)+"\xA0PT",1)])):_("",!0)])],8,J)])])}),256))]),e("div",X,[e("label",Y,[w(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>o.isCheckAll=s),onChange:t[2]||(t[2]=s=>a.checkall()),class:"h-6 w-6 rounded border-neutral-300 text-neutral-600 shadow-sm focus:ring-neutral-500"},null,544),[[C,o.isCheckAll]]),Z])]),e("div",$,[o.hasCheck?(c(),d(h,{key:0},[u(" \u9078\u629E\u3057\u305F\u5546\u54C1\u3092... ")],64)):(c(),d(h,{key:1},[u(" \u5546\u54C1\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\uFF01 ")],64))]),e("div",ee,[e("button",{type:"button",onClick:t[3]||(t[3]=s=>a.submit("point")),class:b([{"opacity-25":i.form.processing||!o.hasCheck},"w-32 inline-block items-center px-1 py-1 bg-blue-900 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-900 active:bg-indigo-900 focus:outline-none focus:border-indigo-900 focus:shadow-outline-blue transition ease-in-out duration-150 m-1"]),disabled:i.form.processing||!o.hasCheck},oe,10,te),e("button",{type:"button",onClick:t[4]||(t[4]=s=>a.submit("delivery")),class:b([{"opacity-25":i.form.processing||!o.hasCheck},"w-32 inline-block items-center px-1 py-1 bg-blue-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-500 active:bg-indigo-500 focus:outline-none focus:border-indigo-500 focus:shadow-outline-lime transition ease-in-out duration-150 m-1"]),disabled:i.form.processing||!o.hasCheck},ne,10,ie)])])):_("",!0),o.ready_delivery==1?(c(),d("div",ce,[de,le,e("div",ae,"\u914D\u9001\u5546\u54C1 \uFF08\u8A08"+l(o.products_count)+"\u70B9\uFF09",1),e("div",ue,[(c(!0),d(h,null,k(n.products.data,(s,x)=>(c(),d(h,null,[i.form.checks["id"+s.id]?(c(),d("div",he,[e("div",be,[e("img",{src:s.image,class:"w-12 h-12 inline-block object-contain"},null,8,_e),e("label",{for:"checkbox"+s.id,class:"cursor-pointer h-12 items-center justify-between flex-1 inline-block text-xs py-1 px-2"},[e("div",null,[e("div",null,l(s.name),1),e("div",null,l(s.rare),1),e("div",fe,l(s.point)+"pt",1)])],8,pe)])])):_("",!0)],64))),256))]),me,e("div",ye,[e("div",ke,[n.profile.id?(c(),d(h,{key:0},[e("p",xe,l(n.profile.first_name+n.profile.last_name),1),e("p",ve,"\u3012"+l(n.profile.postal_code),1),e("p",ge,l(n.profile.address),1)],64)):_("",!0)]),e("div",null,[p(m,{href:r.route("user.address"),type:"button",onClick:t[5]||(t[5]=s=>a.back_delivery()),class:b([{"opacity-25":i.form.processing||!o.hasCheck},"inline-block items-center px-5 py-1.5 bg-neutral-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-neutral-700 active:bg-neutral-700 focus:outline-none focus:border-neutral-700 focus:shadow-outline-neutral transition ease-in-out duration-150 m-1"]),disabled:i.form.processing||!o.hasCheck},{default:f(()=>[u(" \u7DE8\u96C6 ")]),_:1},8,["href","class","disabled"])])]),e("div",we,[e("button",{type:"button",onClick:t[6]||(t[6]=s=>a.back_delivery()),class:b([{"opacity-25":i.form.processing||!o.hasCheck},"w-32 inline-block items-center px-1 py-2.5 bg-cyan-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-cyan-700 active:bg-cyan-700 focus:outline-none focus:border-cyan-700 focus:shadow-outline-cyan transition ease-in-out duration-150 m-1"]),disabled:i.form.processing||!o.hasCheck}," \u623B\u308B ",10,Ce),e("button",{type:"button",onClick:t[7]||(t[7]=s=>a.submit_delivery()),class:b([{"opacity-25":i.form.processing||!o.hasCheck},"w-32 inline-block items-center px-1 py-2.5 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150 m-1"]),disabled:i.form.processing||!o.hasCheck}," \u767A\u9001\u3059\u308B ",10,je)])])):_("",!0),o.ready_delivery==2?(c(),d("div",Ae,[Le,Oe,e("div",Ve,[u(" \u8A08"+l(o.products_count)+"\u70B9\u306E\u5546\u54C1\u306E\u914D\u9001\u624B\u7D9A\u304D\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F\u3002",1),Fe,Be,u(" \u5546\u54C1\u306E\u767A\u9001\u306B\u306F"),He,u("\u304B\u304B\u308B\u53EF\u80FD\u6027\u304C\u3054\u3056\u3044\u307E\u3059\u3002"),Ne,u(" \u3054\u4E86\u627F\u306E\u307B\u3069\u3088\u308D\u3057\u304F\u304A\u9858\u3044\u81F4\u3057\u307E\u3059\u3002 ")]),e("div",Ie,[p(m,{href:r.route("main"),class:"w-36 inline-block items-center px-1 py-2.5 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150 m-1"},{default:f(()=>[u(" \u30AC\u30C1\u30E3TOP\u3078 ")]),_:1},8,["href"]),e("button",{type:"button",onClick:t[8]||(t[8]=s=>a.back_delivery()),class:"w-36 inline-block items-center px-1 py-2.5 bg-cyan-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-cyan-700 active:bg-cyan-700 focus:outline-none focus:border-cyan-700 focus:shadow-outline-cyan transition ease-in-out duration-150 m-1"}," \u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7\u3078 ")])])):_("",!0)]),_:1})],64)}const Ee=H(N,[["render",Te]]);export{Ee as default};
