import{L as C,H as I,E as j,G as h,r as i,o as a,c,b as d,w as f,F as m,d as e,I as _,i as p,J as g,K as w,f as V,n as D}from"./app.bf2ecd47.js";import{U as A}from"./UserLayout.f15e8525.js";import{V as M,r as O,a as R}from"./vue-draggable-next.esm-bundler.bb751981.js";import{_ as S}from"./_plugin-vue_export-helper.cdc0426e.js";import"./Category.66931b4d.js";const B={components:{Link:C,Head:I,UserLayout:A,draggable:M,ArrowLongUpIcon:O,ArrowLongDownIcon:R},props:{errors:Object,auth:Object,banners:Object},methods:{log(){},submit(){this.new_form.file=this.$refs.file.files[0],this.new_form.link_url=this.banner.link_url,this.new_form.post(route("admin.banner.create"),{onSuccess:()=>this.new_form.reset(),preserveScroll:!0})},destroy(s){confirm("\u524A\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304B\uFF1F")&&j.Inertia.delete(route("admin.banner.destroy",s),{preserveScroll:!0})},previewImage(s,t){if(s.target.files.length>0){const o=s.target.files[0];t==-1?this.banner.image=URL.createObjectURL(o):this.banners[t].image=URL.createObjectURL(o)}},levelUp(s){let t;for(t=1;t<this.banners.length&&this.banners[t].id!=s;t++);t<this.banners.length&&this.arrayMove(t,t-1)},arrayMove(s,t){this.banners.splice(t,0,this.banners.splice(s,1)[0])},levelDown(s){let t;for(t=0;t<this.banners.length-1&&this.banners[t].id!=s;t++);t<this.banners.length-1&&this.arrayMove(t,t+1)},submit_order(){this.order_form.files=this.$refs.photo.map(s=>s.files[0]),this.order_form.banners=this.banners,this.order_form.post(route("admin.banner.store"),{preserveScroll:!0,onFinish:()=>{}})}},data(){return{open:!0,dragging:!1,banner:{link_url:"",image:""}}},setup(s){const t=h({file:null,link_url:null}),o=h({files:[],banners:[]});return{new_form:t,order_form:o}},mounted(){}},F={class:"pt-6 md:px-2 px-4"},H=e("h1",{class:"mb-2 text-lg font-bold"},"\u30D0\u30CA\u30FC\u8A2D\u5B9A",-1),N=e("hr",{class:"mb-8"},null,-1),z={class:""},E={class:"m-auto min-w-full text-sm font-medium"},G={class:"border border-neutral-500"},J={class:"border-b"},K=e("td",{class:"bg-white px-3 py-2 whitespace-nowrap border-r w-28"},"\u30D0\u30CA\u30FC\u753B\u50CF",-1),T=["src"],q={class:""},P=e("td",{class:"bg-white px-3 py-2 whitespace-nowrap border-r w-28"},"\u30D0\u30CA\u30FCURL",-1),Q={class:""},W=e("div",{class:"text-center py-2"},[e("button",{type:"submit",class:"w-28 bg-neutral-500 hover:bg-neutral-700 text-white text-sm font-normal py-2 px-5 rounded"}," \u767B\u9332 ")],-1),X=e("hr",{class:"my-4"},null,-1),Y={class:"text-center pb-2"},Z=e("div",{class:"border-b border-r border-l bg-neutral-300 p-2"}," \u30D0\u30CA\u30FC\u7DE8\u96C6 ",-1),$={class:"flex mb-1"},ee={class:"flex-1 h-full border-r"},te={class:"flex"},se={class:"flex-1"},re=["onChange"],ne=["src"],oe={class:"flex w-full"},le={class:"flex-1"},ie=["onUpdate:modelValue"],ae={class:"inline-block align-middle h-full flex items-center z-10 gap-1 p-2"},ce=["onClick"],de=["onClick"],ue=["onClick"],_e={class:"p-1 flex justify-center"},be=["disabled"],he=e("div",{class:"inline-block"},"\u4FDD\u5B58\u3059\u308B",-1),fe=[he];function me(s,t,o,b,u,n){const v=i("Head"),x=i("ArrowLongUpIcon"),y=i("ArrowLongDownIcon"),k=i("draggable"),L=i("UserLayout");return a(),c(m,null,[d(v,{title:"\u30D0\u30CA\u30FC\u8A2D\u5B9A"}),d(L,null,{default:f(()=>[e("div",F,[H,N,e("div",z,[e("form",{onSubmit:t[2]||(t[2]=_(r=>n.submit(),["prevent"]))},[e("table",E,[e("tbody",G,[e("tr",J,[K,e("td",null,[e("input",{onChange:t[0]||(t[0]=r=>n.previewImage(r,-1)),ref:"file",type:"file",class:"w-full"},null,544),u.banner.image!=""?(a(),c("img",{key:0,src:u.banner.image,class:"inline-block my-2 w-full min-w-48 max-h-32 object-contain"},null,8,T)):p("",!0)])]),e("tr",q,[P,e("td",Q,[g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>u.banner.link_url=r),type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"},null,512),[[w,u.banner.link_url]])])])])]),W],32)]),X,e("div",Y,[Z,e("div",$,[d(k,{class:"w-full",list:o.banners,onChange:n.log},{default:f(()=>[(a(!0),c(m,null,V(o.banners,(r,U)=>(a(),c("div",{class:"my-1 text-left cursor-pointer border border-neutral-500 flex items-center hover:bg-white focus:bg-neutral-100 flex-wrap justify-center",key:r.id},[e("div",ee,[e("div",te,[e("div",se,[e("input",{onChange:l=>n.previewImage(l,U),ref_for:!0,ref:"photo",type:"file",class:"w-full"},null,40,re),r.image!=""?(a(),c("img",{key:0,src:r.image,class:"inline-block my-2 w-full min-w-48 max-h-32 object-contain"},null,8,ne)):p("",!0)])]),e("div",oe,[e("div",le,[g(e("input",{"onUpdate:modelValue":l=>r.link_url=l,type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",placeholder:"\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"},null,8,ie),[[w,r.link_url]])])])]),e("div",ae,[e("button",{onClick:_(l=>n.levelUp(r.id),["prevent"]),class:"bg-neutral-700 rounded p-1 hover:bg-neutral-600"},[d(x,{class:"w-5 h-5 text-white block"})],8,ce),e("button",{onClick:_(l=>n.levelDown(r.id),["prevent"]),class:"bg-neutral-700 rounded p-1 hover:bg-neutral-600"},[d(y,{class:"w-5 h-5 text-white block"})],8,de),e("button",{onClick:l=>n.destroy(r.id),class:"bg-red-500 hover:bg-red-700 text-white text-sm font-normal py-1 px-2 rounded"},"\u524A\u9664",8,ue)])]))),128))]),_:1},8,["list","onChange"])]),e("div",_e,[e("button",{onClick:t[3]||(t[3]=_(r=>n.submit_order(),["prevent"])),class:D([{"opacity-25":b.order_form.processing},"w-28 bg-cyan-600 hover:bg-cyan-700 text-white text-sm font-normal py-2 px-3 inline-block rounded"]),disabled:b.order_form.processing},fe,10,be)])])])]),_:1})],64)}const ye=S(B,[["render",me]]);export{ye as default};
