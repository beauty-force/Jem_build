import{C as T,S as D,F as L,f as O,o as S,N as z,V as N,r as B,a as P,b as j,v as F,I as E,g as R,c as X,_ as H,d as U,T as q}from"./toastify.015d7052.js";import{L as A,u as c,r,o as _,c as m,b as o,w as n,d as t,t as g,e as u,g as G,h as K,i as W}from"./app.7dd38efc.js";import{_ as J}from"./_plugin-vue_export-helper.cdc0426e.js";const Q={components:{Category:T,Sidebar:D,Footer:L,TransitionRoot:O,TransitionChild:S,Dialog:z,DialogOverlay:N,XMarkIcon:B,ChevronLeftIcon:P,Bars3Icon:j,Link:A,Menu:F,MenuButton:E,MenuItems:R,MenuItem:X,Logo:H,PlusIcon:U},props:{closeModal:Function},data(){return{sidebarOpened:!1,isDialogMessage:!1,dialogMessage:"",dialogTitle:"",page_title:"",user:{},point_value:0,dp_value:0,point_link:route("user.point"),hide_cat_bar:"",gacha_button:{}}},mounted(){this.user=c().props.value.auth.user,this.user&&(this.point_value=this.user.point,this.dp_value=this.user.dp,this.user.type==1&&(this.point_link=route("test.user.point"))),this.gacha_button=c().props.value.gacha_button,this.hide_cat_bar=c().props.value.hide_cat_bar;const s=document.querySelectorAll("img.lazy"),a={root:null,rootMargin:"0px",threshold:.1},d=e=>{e.src=e.dataset.src,e.classList.remove("lazy")},v=new IntersectionObserver((e,b)=>{e.forEach(i=>{i.isIntersecting&&(d(i.target),b.unobserve(i.target))})},a);s.forEach(e=>{v.observe(e)})},computed:{flash(){return c().props.value.flash}},watch:{flash:function(s,a){s.type=="notification"&&this.notification(s.message),s.type=="dialog"&&(this.dialogMessage=s.message,this.dialogTitle=s.title,this.isDialogMessage=!0),s.data&&s.data.user&&(this.point_value=s.data.user.point,this.dp_value=s.data.user.dp,this.user=c().props.value.auth.user)}},methods:{format_number(s){return String(s).replace(/(.)(?=(\d{3})+$)/g,"$1,")},notification(s){s&&q({text:s,duration:3e4,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!1,className:"toastify-content newClass",onClick:function(){}}).showToast()},back(){window.history.back()}}},Y={class:"flex min-h-screen text-neutral-700 text-base underline-offset-2 font-medium"},Z={class:"flex flex-col relative z-10 h-full w-96 bg-gray-100 border-l border-neutral-200 ml-auto"},V={class:"flex-1 overflow-y-auto"},$={class:"flex flex-col text-neutral-700 rounded relative z-20 top-20 w-fit min-w-64 px-4 bg-neutral-50 border-l border-neutral-200 m-auto max-w-full"},ee={class:"pt-3 pb-1 px-1 text-center font-bold"},te=["innerHTML"],se=t("hr",{class:"mt-3"},null,-1),oe={class:"w-full max-w-[760px] mx-auto flex flex-col"},ae={class:"flex-shrink-0 w-full max-w-[760px] sticky top-0 z-[15]"},ne={class:"flex justify-center py-4 bg-repeat bg-black h-20 border-b border-neutral-400"},re={class:"md:w-[760px] w-full flex md:px-5 px-2 mx-auto justify-center"},ie={class:"flex items-center flex-1 pr-2"},le={key:0,class:"flex-shrink-0 flex items-center gap-2 text-slate-300 text-sm md:text-md"},ce={class:"flex items-center border border-gray-400 rounded-full px-1.5 md:px-2.5 py-0.5"},ue=t("img",{src:"/images/icon_cash.png",class:"h-4"},null,-1),de={class:"border border-gray-400 rounded-full p-[1.5px]"},fe={class:"border border-gray-400 rounded-full px-1.5 md:px-2.5 py-0.5 min-w-[60px] text-center"},pe=t("span",null," GP",-1),_e=["src"],he={key:1,class:"flex-shrink-0 flex items-center gap-2 text-neutral-300 text-sm md:text-base font-semibold"},me={class:"w-full flex-1 relative"};function ge(s,a,d,v,e,b){const i=r("XMarkIcon"),k=r("Sidebar"),f=r("TransitionChild"),x=r("DialogOverlay"),y=r("Dialog"),w=r("TransitionRoot"),M=r("Logo"),C=r("PlusIcon"),h=r("Link"),I=r("Category");return _(),m("div",Y,[o(w,{show:e.sidebarOpened,class:"h-full"},{default:n(()=>[o(y,{open:e.sidebarOpened,onClose:a[1]||(a[1]=p=>e.sidebarOpened=!1),class:"fixed h-full inset-0 z-40"},{default:n(()=>[o(f,{enter:"transition ease-in-out duration-200 transform","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-200 transform","leave-from":"translate-x-0","leave-to":"translate-x-full",as:"template"},{default:n(()=>[t("div",Z,[t("button",{onClick:a[0]||(a[0]=p=>e.sidebarOpened=!1),class:"z-10 absolute top-4 right-6 flex items-center justify-center w-8 h-8 rounded-full bg-neutral-500 text-white hover:bg-neutral-600 focus:outline-none",type:"button",value:"Close sidebar"},[o(i,{class:"h-5 w-5"})]),t("div",V,[o(k)])])]),_:1}),o(f,{enter:"transition-opacity ease-linear duration-200","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-200","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:n(()=>[o(x,{class:"fixed inset-0 bg-neutral-600 h-full bg-opacity-50"})]),_:1})]),_:1},8,["open"])]),_:1},8,["show"]),o(w,{show:e.isDialogMessage,class:"h-full"},{default:n(()=>[o(y,{open:e.isDialogMessage,onClose:a[3]||(a[3]=p=>{var l;(l=d.closeModal)==null||l.call(),e.isDialogMessage=!1}),class:"fixed h-full inset-0 z-40"},{default:n(()=>[o(f,{enter:"transition ease-in-out duration-200 transform","enter-from":"translate-y-full","enter-to":"translate-y-0",leave:"transition ease-in-out duration-200 transform","leave-from":"translate-y-0","leave-to":"translate-y-full",as:"template"},{default:n(()=>[t("div",$,[t("div",ee,g(e.dialogTitle),1),t("div",{class:"px-4 text-sm text-center",innerHTML:e.dialogMessage},null,8,te),se,t("button",{onClick:a[2]||(a[2]=p=>{var l;(l=d.closeModal)==null||l.call(),e.isDialogMessage=!1}),class:"cursor-pointer p-2 text-cyan-500 text-center text-base focus-visible:outline-0"}," OK ")])]),_:1}),o(f,{enter:"transition-opacity ease-linear duration-200","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-200","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:n(()=>[o(x,{class:"fixed inset-0 bg-neutral-600 h-full bg-opacity-50"})]),_:1})]),_:1},8,["open"])]),_:1},8,["show"]),t("div",oe,[t("div",ae,[t("div",ne,[t("div",re,[t("div",ie,[o(M)]),this.user?(_(),m("div",le,[o(h,{href:e.point_link,class:"text-center border border-gray-400 rounded-full p-[1.5px]"},{default:n(()=>[t("div",ce,[ue,u("\xA0\xA0"+g(e.point_value)+"pt",1),o(C,{class:"h-5 ml-3"})])]),_:1},8,["href"]),t("div",de,[t("div",fe,[u(g(e.dp_value)+" ",1),pe])]),t("div",{onClick:a[4]||(a[4]=p=>e.sidebarOpened=!0),class:"overflow-hidden cursor-pointer w-9 md:w-10 h-9 md:h-10 rounded-full border border-yellow-900/50"},[t("img",{src:e.user.avatar?"/images/avatars/"+e.user.avatar:"/images/icon_user.png",class:"w-full h-full object-cover"},null,8,_e)])])):(_(),m("div",he,[o(h,{href:s.route("register"),class:"hover:border-b"},{default:n(()=>[u(" \u4F1A\u54E1\u767B\u9332 ")]),_:1},8,["href"]),u(" / "),o(h,{href:s.route("login"),class:"hover:border-b"},{default:n(()=>[u(" \u30ED\u30B0\u30A4\u30F3 ")]),_:1},8,["href"])]))])])]),t("main",me,[e.hide_cat_bar?K("",!0):(_(),G(I,{key:0,is_admin:!0})),W(s.$slots,"default")])])])}const ye=J(Q,[["render",ge]]);export{ye as U};
