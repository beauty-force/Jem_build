import{H as v,L as k,u as C,r as u,o,c as r,b as x,w as _,F as p,d as e,h as b,e as i,f as h,n as m,i as g,t as n}from"./app.2dd2d94b.js";import{U as L}from"./UserLayout.590e8dfe.js";import{_ as j}from"./_plugin-vue_export-helper.cdc0426e.js";import"./Category.1eb58d2b.js";const P={components:{Head:v,AppLayout:L,Link:k},props:{},data(){return{user:null,period:"",users:[],loading:!1,history:[],periods:[{title:"\u672C\u65E5",period:"daily"},{title:"\u9031\u9593",period:"weekly"},{title:"\u6708\u9593",period:"monthly"},{title:"\u5168\u671F\u9593",period:"total"}]}},setup(l){},mounted(){this.user=C().props.value.auth.user,this.onPeriodSelection("daily")},methods:{format_number(l){return String(l).replace(/(.)(?=(\d{3})+$)/g,"$1,")},onPeriodSelection(l){this.period!=l&&(this.loading=!0,this.users=[],this.period=l,axios.get(route("ranking.data",{period:this.period})).then(a=>{this.loading=!1,this.period=="history"?this.history=a.data.history:this.users=a.data.users}).catch(a=>{}))}}},S={class:"h-full flex flex-col"},B={class:"py-3 pt-5 px-6"},H=e("h1",{class:"text-lg text-center font-bold underline underline-offset-8"},"\u30E9\u30F3\u30AD\u30F3\u30B0",-1),A={class:"pt-2 w-full px-2 flex"},N=["onClick"],V={class:"flex-1 relative"},z={key:0,class:"absolute top-0 bottom-0 left-0 right-0 flex justify-center items-center bg-neutral-300/75 z-[20]"},D=e("div",{class:"w-16 h-16 bg-white p-4 rounded-full shadow-lg"},[e("svg",{class:"animate-spin h-8 w-8 text-neutral-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})])],-1),F=[D],T={key:1,class:"p-3"},U={key:0,class:"flex justify-center flex-col items-center gap-1 py-2 border-b"},E={class:"relative flex justify-center w-full pb-4"},M=["src"],R=e("img",{src:"/images/top_one.svg",class:"w-28 absolute bottom-0"},null,-1),q={class:"flex font-bold text-base"},G={class:"flex gap-1 items-center justify-center text-sm"},I=e("img",{src:"/images/icon_cash.png",class:"w-4 h-4"},null,-1),J={key:1,class:"flex items-center gap-2.5 border-b py-2"},K={class:"w-8 text-center text-xl font-[mplus2]"},O=["src"],Q={class:"space-y-0.5"},W={class:"flex font-bold text-base"},X={class:"flex gap-1 items-center text-sm"},Y=e("img",{src:"/images/icon_cash.png",class:"w-4 h-4"},null,-1),Z={key:2,class:"p-3 w-full overflow-auto"},$={class:"w-fit min-w-full text-xs md:text-sm"},ee=e("thead",{class:"text-nowrap"},[e("tr",{class:"leading-8"},[e("th",{class:"px-2"},"\u671F\u9593"),e("th",{class:"px-2"},"\u30E9\u30F3\u30AF"),e("th",{class:"px-2"},"\u5831\u916C")])],-1),te={class:"leading-8"},se={class:"border text-center px-2 leading-6 py-2 w-32 md:w-64"},oe={class:"text-nowrap"},re={class:"text-nowrap"},ne={class:"border px-2 w-40"},le={class:"flex gap-3 text-nowrap justify-center font-semibold"},ie={class:"flex gap-1 items-center justify-center text-sm"},ae=e("img",{src:"/images/icon_cash.png",class:"w-4 h-4"},null,-1),ce={class:"border px-2 min-w-1/2"};function de(l,a,pe,ue,s,c){const y=u("Head"),f=u("Link"),w=u("AppLayout");return o(),r(p,null,[x(y,{title:"\u30E9\u30F3\u30AD\u30F3\u30B0"}),x(w,null,{default:_(()=>[e("div",S,[e("div",B,[H,s.user&&s.user.type==1?(o(),b(f,{key:0,href:l.route("admin.ranking.history"),class:"text-sm border border-neutral-500 rounded-full px-3 py-1 hover:text-white hover:bg-neutral-500 absolute top-5 right-3"},{default:_(()=>[i(" \u5831\u916C\u5C65\u6B74\u3092\u898B\u308B ")]),_:1},8,["href"])):(o(),b(f,{key:1,href:l.route("ranking.about"),class:"text-sm border border-neutral-500 rounded-full px-3 py-1 hover:text-white hover:bg-neutral-500 absolute top-5 right-3"},{default:_(()=>[i(" \u5831\u916C\u306B\u3064\u3044\u3066 ")]),_:1},8,["href"]))]),e("div",A,[(o(!0),r(p,null,h(s.periods,(t,d)=>(o(),r("button",{onClick:_e=>c.onPeriodSelection(t.period),class:m(["-mb-[1px] flex-1 inline-block text-center py-1.5 border-neutral-500 border-x border-t",{"bg-white text-neutral-900 font-bold text-base -mt-1":t.period==s.period,"hover:bg-neutral-300 text-neutral-900 bg-neutral-200 border-b text-sm":t.period!=s.period}])},n(t.title),11,N))),256)),s.user&&s.user.type==0?(o(),r("button",{key:0,onClick:a[0]||(a[0]=t=>c.onPeriodSelection("history")),class:m(["-mb-[1px] flex-grow inline-block text-center py-1.5 border-neutral-500 border-x border-t",{"bg-white text-neutral-900 font-bold text-base -mt-1":s.period=="history","hover:bg-neutral-300 text-neutral-900 bg-neutral-200 border-b text-sm":s.period!="history"}])}," \u5831\u916C\u5C65\u6B74 ",2)):g("",!0)]),e("div",V,[s.loading?(o(),r("div",z,F)):g("",!0),s.period!="history"?(o(),r("div",T,[(o(!0),r(p,null,h(s.users,(t,d)=>(o(),r("div",null,[t.total_points==s.users[0].total_points?(o(),r("div",U,[e("div",E,[e("img",{src:s.users[0].avatar?"/images/avatars/"+s.users[0].avatar:"/images/icon_user.png",class:"w-24 h-24 rounded-full border-[#1A6284] border-2"},null,8,M),R]),e("span",q,n(s.users[0].name),1),e("span",G,[I,i(" "+n(s.users[0].total_points),1)])])):(o(),r("div",J,[e("span",K,n(s.users[d-1].total_points!=t.total_points?d+1:""),1),e("img",{src:t.avatar?"/images/avatars/"+t.avatar:"/images/icon_user.png",class:"w-14 h-14 rounded-full border"},null,8,O),e("div",Q,[e("span",W,n(t.name),1),e("span",X,[Y,i(" "+n(t.total_points),1)])])]))]))),256))])):(o(),r("div",Z,[e("table",$,[ee,e("tbody",null,[(o(!0),r(p,null,h(s.history,(t,d)=>(o(),r("tr",te,[e("td",se,[e("span",null,[e("span",oe,n(t.startDate),1),i(" - "),e("span",re,n(t.endDate),1)])]),e("td",ne,[e("span",le,[e("span",null,n(t.rank)+" \u4F4D",1),e("span",ie,[i(" ("),ae,i(" "+n(c.format_number(t.total_point))+" ) ",1)])])]),e("td",ce,n(t.ref_id>0?`${c.format_number(t.description)} PT\u4ED8\u4E0E`:t.description),1)]))),256))])])]))])])]),_:1})],64)}const me=j(P,[["render",de]]);export{me as default};
